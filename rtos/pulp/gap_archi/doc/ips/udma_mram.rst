.. 
   Input file: fe/ips/udma/udma_mram/README.md

Register map
^^^^^^^^^^^^


Overview
""""""""

.. table:: 

    +---------------------------------------+------+-----+-------------------------------+
    |                 Name                  |Offset|Width|          Description          |
    +=======================================+======+=====+===============================+
    |:ref:`RX_DEST<udma_mram_RX_DEST>`      |     0|   32|Stream ID for the uDMA channel |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`TX_DEST<udma_mram_TX_DEST>`      |     4|   32|Stream ID for the uDMA channel |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`TRANS_MODE<udma_mram_TRANS_MODE>`|     8|   32|Configure transaction mode     |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`TRANS_ADDR<udma_mram_TRANS_ADDR>`|    12|   32|Configure each transaction addr|
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`TRANS_SIZE<udma_mram_TRANS_SIZE>`|    16|   32|Configure each transaction size|
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`TRANS_CFG<udma_mram_TRANS_CFG>`  |    20|   32|Start  each transaction rx/tx  |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`EXT_ADDR<udma_mram_EXT_ADDR>`    |    24|   32|Memory access address register.|
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`STATUS<udma_mram_STATUS>`        |    28|   32|MRAM status register.          |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`MODE<udma_mram_MODE>`            |    32|   32|MRAM mode configure register.  |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`ERASE_ADDR<udma_mram_ERASE_ADDR>`|    36|   32|Erase address register.        |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`ERASE_SIZE<udma_mram_ERASE_SIZE>`|    40|   32|Erase size register.           |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`CLK_DIV<udma_mram_CLK_DIV>`      |    44|   32|Clock divide.                  |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`ISR<udma_mram_ISR>`              |    48|   32|IRQ status register.           |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`IER<udma_mram_IER>`              |    52|   32|IRQ enable register.           |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`LINE_2D<udma_mram_LINE_2D>`      |    60|   32|OSPI 2D line.                  |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`STRIDE_2D<udma_mram_STRIDE_2D>`  |    64|   32|OSPI 2D stride.                |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`ENABLE_2D<udma_mram_ENABLE_2D>`  |    68|   32|2D mode enable.                |
    +---------------------------------------+------+-----+-------------------------------+
    |:ref:`TIMING_CFG<udma_mram_TIMING_CFG>`|    72|   32|Timing configuration.          |
    +---------------------------------------+------+-----+-------------------------------+

.. _udma_mram_RX_DEST:

RX_DEST
"""""""

Stream ID for the uDMA channel

.. table:: 

    +-----+---+----+---------------------------------------------------------------------------+
    |Bit #|R/W|Name|                                Description                                |
    +=====+===+====+===========================================================================+
    |7:0  |R/W|DEST|Stream ID for the RX and TX uDMA channel. Default is 0xFF(channel disabled)|
    +-----+---+----+---------------------------------------------------------------------------+

.. _udma_mram_TX_DEST:

TX_DEST
"""""""

Stream ID for the uDMA channel

.. table:: 

    +-----+---+----+---------------------------------------------------------------------+
    |Bit #|R/W|Name|                             Description                             |
    +=====+===+====+=====================================================================+
    |7:0  |R/W|DEST|Stream ID for the CMD uDMA channel. Default is 0xFF(channel disabled)|
    +-----+---+----+---------------------------------------------------------------------+

.. _udma_mram_TRANS_MODE:

TRANS_MODE
""""""""""

Configure transaction mode

.. table:: 

    +-----+---+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|     Name      |                                                                               Description                                                                                |
    +=====+===+===============+==========================================================================================================================================================================+
    |    0|R/W|AUTO_ENA       |Transfer mode in AUTO, IP will configure the UDMA transfer automatically using register parameters instead using SW configuration in UDMA - 1'b0: AUTO_DIS - 1'b1: AUTO_EN|
    +-----+---+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    1|R/W|XIP_EN         |Transfer mode in XIP, IP will configure the UDMA transfer automatically using XIP parameters  instead using SW configuration in UDMA - 1'b0: XIP_DIS - 1'b1: XIP_EN       |
    +-----+---+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |3:2  |R  |RESERVED       |Reserved                                                                                                                                                                  |
    +-----+---+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    4|R/W|XIP_HALTED     |Halted XIP refill when in XIP, XIP refill will wait SW unlock this bit.  - 1'b0: XIP_RUNNING - 1'b1: XIP_HALTED                                                           |
    +-----+---+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    5|R/W|XIP_AUTO_HALTED|XIP refills will be automatically blocked when an erase operation is on-going.  - 1'b0: Disabled - 1'b1: enabled                                                          |
    +-----+---+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _udma_mram_TRANS_ADDR:

TRANS_ADDR
""""""""""

Configure each transaction addr

.. table:: 

    +-----+---+----+----------------------------------------+
    |Bit #|R/W|Name|              Description               |
    +=====+===+====+========================================+
    |31:0 |R/W|ADDR|Transfer addr, only when MODE is in AUTO|
    +-----+---+----+----------------------------------------+

.. _udma_mram_TRANS_SIZE:

TRANS_SIZE
""""""""""

Configure each transaction size

.. table:: 

    +-----+---+----+-------------+
    |Bit #|R/W|Name| Description |
    +=====+===+====+=============+
    |20:0 |R/W|SIZE|Transfer Size|
    +-----+---+----+-------------+

.. _udma_mram_TRANS_CFG:

TRANS_CFG
"""""""""

Start  each transaction rx/tx

.. table:: 

    +-----+---+-----+---------------------------------------------------------------------------+
    |Bit #|R/W|Name |                                Description                                |
    +=====+===+=====+===========================================================================+
    |    0|R/W|RXTX |Transfer type - 1'b0: TX - 1'b1: RX                                        |
    +-----+---+-----+---------------------------------------------------------------------------+
    |    1|R/W|VALID|Transfer valid to start, always read 0 - 1'b0: clear transfer - 1'b1: Start|
    +-----+---+-----+---------------------------------------------------------------------------+

.. _udma_mram_EXT_ADDR:

EXT_ADDR
""""""""

Memory access address register.

.. table:: 

    +-----+---+----+-------------------------------+
    |Bit #|R/W|Name|          Description          |
    +=====+===+====+===============================+
    |31:0 |R/W|ADDR|Memory access address bitfield.|
    +-----+---+----+-------------------------------+

.. _udma_mram_STATUS:

STATUS
""""""

MRAM status register.

.. table:: 

    +-----+---+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                                            Description                                                                            |
    +=====+===+==========+===================================================================================================================================================================+
    |    0|R  |ERASE_BUSY|Erase busy: - 1'b0: no busy - 1'b1: busy                                                                                                                           |
    +-----+---+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    1|R  |TX_BUSY   |TX busy: - 1'b0: no busy - 1'b1: busy                                                                                                                              |
    +-----+---+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    2|R  |RX_BUSY   |RX busy: - 1'b0: no busy - 1'b1: busy                                                                                                                              |
    +-----+---+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    3|R  |RESERVED  |-                                                                                                                                                                  |
    +-----+---+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    4|R  |UE_ERR    |Unrecoverable Error, High indicates unrecoverable errors detected. Not 100% accurate for 3 or more bit errors. In the case of 3-bit errors,correct detection is 84%|
    +-----+---+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    5|R  |EC_ERR    |ECC Error Correction, Low indicates no ECC error detected. High indicates 1 or 2 bit errors corrected.                                                             |
    +-----+---+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _udma_mram_MODE:

MODE
""""

MRAM mode configure register.

.. table:: 

    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|  Name   |                                                                            Description                                                                             |
    +=====+===+=========+====================================================================================================================================================================+
    |    0|R/W|ECCBYPS  |Signal ECC bypass                                                                                                                                                   |
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    1|R/W|DPD      |Signal Deep power down                                                                                                                                              |
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    3|R/W|TMEN     |Signal TMEN                                                                                                                                                         |
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    4|R/W|NVR      |Signal NVR                                                                                                                                                          |
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    5|R/W|RSTb     |Signal RSTb                                                                                                                                                         |
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    6|R/W|RETb     |Signal RETb                                                                                                                                                         |
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |    7|R/W|PORb     |Signal PORb                                                                                                                                                         |
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |15:8 |R/W|OPERATION|MRAM operation configure, -8'h00 power up -8'h01 trim configure -8'h02 program -8'h04 chip erase -8'h08 sector erase -8'h10 word erase -8'h20 power down -8'h40 read|
    +-----+---+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _udma_mram_ERASE_ADDR:

ERASE_ADDR
""""""""""

Erase address register.

.. table:: 

    +-----+---+--------+----------------------------------+
    |Bit #|R/W|  Name  |           Description            |
    +=====+===+========+==================================+
    |3:0  |R/W|ADDR_LSB|Erase addr, lower 4 bit is useless|
    +-----+---+--------+----------------------------------+
    |20:4 |R/W|ADDR_MSB|Erase addr                        |
    +-----+---+--------+----------------------------------+

.. _udma_mram_ERASE_SIZE:

ERASE_SIZE
""""""""""

Erase size register.

.. table:: 

    +-----+---+----+-----------+
    |Bit #|R/W|Name|Description|
    +=====+===+====+===========+
    |6:0  |R/W|SIZE|Erase Size |
    +-----+---+----+-----------+

.. _udma_mram_CLK_DIV:

CLK_DIV
"""""""

Clock divide.

.. table:: 

    +-----+---+------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W| Name |                                                                     Description                                                                     |
    +=====+===+======+=====================================================================================================================================================+
    |7:0  |R/W|DATA  |Clock divide data, form 0 – 255, frequency divide table is : -8’h0 – IO_FREQUENCY / 1 -8’h1 – IO_FREQUENCY / 2 -8’h2 – IO_FREQUENCY / 4 …            |
    +-----+---+------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
    |8    |W  |VALID |Clock divide valid, user can not control. Every time there is clock divide write access, set 1 by default, then when clock divide is finished, set 0.|
    +-----+---+------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
    |9    |W  |ENABLE|MRAM Clock enable.                                                                                                                                   |
    +-----+---+------+-----------------------------------------------------------------------------------------------------------------------------------------------------+

.. _udma_mram_ISR:

ISR
"""

IRQ status register.

.. table:: 

    +-----+---+----------------+-----------------------+
    |Bit #|R/W|      Name      |      Description      |
    +=====+===+================+=======================+
    |    0|R  |erase_done      |MRAM erase finish      |
    +-----+---+----------------+-----------------------+
    |    1|R  |program_done    |MRAM program finish    |
    +-----+---+----------------+-----------------------+
    |    2|R  |trim_config_done|MRAM trim config finish|
    +-----+---+----------------+-----------------------+
    |    3|R  |rx_done         |MRAM read finish.      |
    +-----+---+----------------+-----------------------+

.. _udma_mram_IER:

IER
"""

IRQ enable register.

.. table:: 

    +-----+---+------------------+-------------------------------+
    |Bit #|R/W|       Name       |          Description          |
    +=====+===+==================+===============================+
    |    0|R/W|erase_en          |MRAM erase IRQ enable          |
    +-----+---+------------------+-------------------------------+
    |    1|R/W|program_en        |MRAM program IRQ enable        |
    +-----+---+------------------+-------------------------------+
    |    2|R/W|trim_config_en    |MRAM trim config IRQ enable    |
    +-----+---+------------------+-------------------------------+
    |    3|R/W|rx_done_en        |MRAM read IRQ enable.          |
    +-----+---+------------------+-------------------------------+
    |    4|R/W|xip_erase_en      |MRAM xip erase IRQ enable      |
    +-----+---+------------------+-------------------------------+
    |    5|R/W|xip_program_en    |MRAM xip program IRQ enable    |
    +-----+---+------------------+-------------------------------+
    |    6|R/W|xip_trim_config_en|MRAM xip trim config IRQ enable|
    +-----+---+------------------+-------------------------------+
    |    7|R/W|rx_xip_done_en    |MRAM xip read IRQ enable.      |
    +-----+---+------------------+-------------------------------+

.. _udma_mram_LINE_2D:

LINE_2D
"""""""

OSPI 2D line.

.. table:: 

    +-----+---+----+--------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|Name|                                                 Description                                                  |
    +=====+===+====+==============================================================================================================+
    |31:0 |R/W|LINE|OSPI 2D line with 2D mode. For example, ADDR = START_ADDR + i * BURST_STRIDE. Normally, LINE &gt;= BURST_SIZE.|
    +-----+---+----+--------------------------------------------------------------------------------------------------------------+

.. _udma_mram_STRIDE_2D:

STRIDE_2D
"""""""""

OSPI 2D stride.

.. table:: 

    +-----+---+------+------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W| Name |                                                   Description                                                    |
    +=====+===+======+==================================================================================================================+
    |31:0 |R/W|STRIDE|OSPI 2D stride with 2D mode. For example, ADDR = START_ADDR + i * BURST_STRIDE. Normally, STRIDE &gt;= BURST_SIZE.|
    +-----+---+------+------------------------------------------------------------------------------------------------------------------+

.. _udma_mram_ENABLE_2D:

ENABLE_2D
"""""""""

2D mode enable.

.. table:: 

    +-----+---+------+-----------------------------------------------------------------------+
    |Bit #|R/W| Name |                              Description                              |
    +=====+===+======+=======================================================================+
    |    0|R/W|ENABLE|MRAM 2D mode enable :  - 1'b0: 2D mode disable -  1'b1: 2D mode disable|
    +-----+---+------+-----------------------------------------------------------------------+

.. _udma_mram_TIMING_CFG:

TIMING_CFG
""""""""""

Timing configuration.

.. table:: 

    +-----+---+---------------+----------------------------------------+
    |Bit #|R/W|     Name      |              Description               |
    +=====+===+===============+========================================+
    |2:0  |R/W|STROBE_TIME_CNT|Strobe timing couner                    |
    +-----+---+---------------+----------------------------------------+
    |5:3  |R/W|GO_SUP_TIME_CNT|Power Supply timing couner              |
    +-----+---+---------------+----------------------------------------+
    |8:6  |R/W|MEN_TIME_CNT   |MRAM EN timing couner                   |
    +-----+---+---------------+----------------------------------------+
    |15:9 |R/W|RW_TIME_CNT    |Latency from write to read timing couner|
    +-----+---+---------------+----------------------------------------+
    |18:16|R/W|ADS_TIME_CNT   |Address setup time couner               |
    +-----+---+---------------+----------------------------------------+
    |28:19|R/W|PGS_TIME_CNT   |Program Setup time couner               |
    +-----+---+---------------+----------------------------------------+
    |31:29|R/W|PROG_TIME_CNT  |Program Min Pulse Width timing couner   |
    +-----+---+---------------+----------------------------------------+
