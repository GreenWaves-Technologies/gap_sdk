.. 
   Input file: docs/IP_REFERENCES/CLUSTER_EVENT_UNIT_barrier.md

Register map for hardware barriers
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


Overview
""""""""


Refer to :ref:`GAP9 address map<REF_MEMORY_MAP_DETAIL>` for the base address to be used.

.. table:: 
    :align: center
    :widths: 40 12 12 90

    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+
    |                                          Name                                           |Offset|Width|                                       Description                                       |
    +=========================================================================================+======+=====+=========================================================================================+
    |:ref:`HW_BARR_TRIGGER_MASK<cluster_event_unit_barrier__HW_BARR_TRIGGER_MASK>`            |     0|   32|Trigger mask for HW barrier                                                              |
    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+
    |:ref:`HW_BARR_STATUS<cluster_event_unit_barrier__HW_BARR_STATUS>`                        |     4|   32|Current status of HW barrier                                                             |
    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+
    |:ref:`HW_BARR_TARGET_MASK<cluster_event_unit_barrier__HW_BARR_TARGET_MASK>`              |    12|   32|Barrier target mask                                                                      |
    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+
    |:ref:`HW_BARR_TRIGGER<cluster_event_unit_barrier__HW_BARR_TRIGGER>`                      |    16|   32|Trigger the HW barrier                                                                   |
    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+
    |:ref:`HW_BARR_TRIGGER_SELF<cluster_event_unit_barrier__HW_BARR_TRIGGER_SELF>`            |    20|   32|Self-trigger the HW barrier (only accessible from CL_EVENT_UNIT_DEMUX)                   |
    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+
    |:ref:`HW_BARR_TRIGGER_WAIT<cluster_event_unit_barrier__HW_BARR_TRIGGER_WAIT>`            |    24|   32|Self-trigger and go to sleep (only accessible from CL_EVENT_UNIT_DEMUX)                  |
    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+
    |:ref:`HW_BARR_TRIGGER_WAIT_CLEAR<cluster_event_unit_barrier__HW_BARR_TRIGGER_WAIT_CLEAR>`|    28|   32|Self-trigger, go to sleep and clear on wake-up (only accessible from CL_EVENT_UNIT_DEMUX)|
    +-----------------------------------------------------------------------------------------+------+-----+-----------------------------------------------------------------------------------------+

.. _cluster_event_unit_barrier__HW_BARR_TRIGGER_MASK:

HW_BARR_TRIGGER_MASK
""""""""""""""""""""

Trigger mask for HW barrier

.. table:: 
    :align: center
    :widths: 13 12 45 24 85

    +-----+---+----+-----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|Name|Reset|                                                                                Description                                                                                 |
    +=====+===+====+=====+============================================================================================================================================================================+
    |8:0  |R/W|MASK|0x000|Trigger mask for barrier to match: every bit set to b1 in MASK must be set in HW_BARR_STATUS for the barrier to be triggered. Writing all bits to b0 disables the HW barrier|
    +-----+---+----+-----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _cluster_event_unit_barrier__HW_BARR_STATUS:

HW_BARR_STATUS
""""""""""""""

Current status of HW barrier

.. table:: 
    :align: center
    :widths: 13 12 45 24 85

    +-----+---+------+-----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W| Name |Reset|                                                                                                               Description                                                                                                               |
    +=====+===+======+=====+=========================================================================================================================================================================================================================================+
    |8:0  |R  |STATUS|0x000|Current status of the barrier: a bit reading as b1 means that the corresponding bit has already been triggered. This field is cleared to 0x000 when the barrier triggers, i.e. when status matches the mask value in HW_BARR_TRIGGER_MASK|
    +-----+---+------+-----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _cluster_event_unit_barrier__HW_BARR_TARGET_MASK:

HW_BARR_TARGET_MASK
"""""""""""""""""""

Barrier target mask

.. table:: 
    :align: center
    :widths: 13 12 45 24 85

    +-----+---+---------+-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|  Name   |Reset|                                                                                                              Description                                                                                                              |
    +=====+===+=========+=====+=======================================================================================================================================================================================================================================+
    |8:0  |R  |CORE_MASK|0x000|Target cores mask: once the HW barrier triggers, i.e. when HW_BARR_STATUS matches HW_BARR_TRIGGER_MASK, the event line corresponding to this barrier is asserted for all cores which have the corresponding bit set to b1 in this field|
    +-----+---+---------+-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _cluster_event_unit_barrier__HW_BARR_TRIGGER:

HW_BARR_TRIGGER
"""""""""""""""

Trigger the HW barrier

.. table:: 
    :align: center
    :widths: 13 12 45 24 85

    +-----+---+-----+-----+-------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|Name |Reset|                                                       Description                                                       |
    +=====+===+=====+=====+=========================================================================================================================+
    |8:0  |R  |VALUE|0x000|Every bit written as b1 triggers the corresponding bit of HW barrier, i.e. the corresponding bit is set in HW_BARR_STATUS|
    +-----+---+-----+-----+-------------------------------------------------------------------------------------------------------------------------+

.. _cluster_event_unit_barrier__HW_BARR_TRIGGER_SELF:

HW_BARR_TRIGGER_SELF
""""""""""""""""""""

Self-trigger the HW barrier (only accessible from CL_EVENT_UNIT_DEMUX)

.. table:: 
    :align: center
    :widths: 13 12 45 24 85

    +-----+---+-----+----------+-----------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|Name |  Reset   |                                                               Description                                                               |
    +=====+===+=====+==========+=========================================================================================================================================+
    |31:0 |R  |DUMMY|0x00000000|When read, the bit corresponding to current cluster core is triggered in the barrier, i.e. the corresponding bit is set in HW_BARR_STATUS|
    +-----+---+-----+----------+-----------------------------------------------------------------------------------------------------------------------------------------+

.. _cluster_event_unit_barrier__HW_BARR_TRIGGER_WAIT:

HW_BARR_TRIGGER_WAIT
""""""""""""""""""""

Self-trigger and go to sleep (only accessible from CL_EVENT_UNIT_DEMUX)

.. table:: 
    :align: center
    :widths: 13 12 45 24 85

    +-----+---+-----+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|Name |  Reset   |                                                                                     Description                                                                                      |
    +=====+===+=====+==========+======================================================================================================================================================================================+
    |31:0 |R  |EVENT|0x00000000|Same behavior as HW_BARR_TRIGGER_SELF, but the core then goes to sleep. On wakeup, the read data is identical to the content of the EU_CORE_BUFFER_MASKED register of the issuing core|
    +-----+---+-----+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _cluster_event_unit_barrier__HW_BARR_TRIGGER_WAIT_CLEAR:

HW_BARR_TRIGGER_WAIT_CLEAR
""""""""""""""""""""""""""

Self-trigger, go to sleep and clear on wake-up (only accessible from CL_EVENT_UNIT_DEMUX)

.. table:: 
    :align: center
    :widths: 13 12 45 24 85

    +-----+---+-----+----------+-------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|Name |  Reset   |                                                                Description                                                                |
    +=====+===+=====+==========+===========================================================================================================================================+
    |31:0 |R  |EVENT|0x00000000|Same behavior as HW_BARR_TRIGGER_WAIT, except that bits of EU_CORE_BUFFER that are set to 1 in EU_CORE_MASK are cleared to 0 after the read|
    +-----+---+-----+----------+-------------------------------------------------------------------------------------------------------------------------------------------+
